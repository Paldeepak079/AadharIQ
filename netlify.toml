[build]
  # Build command (explicitly install and build from the subdirectory)
  command = "cd aadhaariq && npm install && npm run build"
  
  # Publish directory relative to the repository root
  publish = "aadhaariq/dist"

[[redirects]]
  # Handle API proxy to avoid CORS/Mixed Content
  from = "/api/*"
  to = "http://localhost:8001/api/:splat" # Default to local, user can override via netlify.toml or Env vars
  status = 200

[[redirects]]
  # Handle SPA routing (redirect all requests to index.html)
  from = "/*"
  to = "/index.html"
  status = 200

[build.environment]
  # Ensure Node version is compatible
  NODE_VERSION = "20"
